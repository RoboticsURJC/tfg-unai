flow: lidar-circle-detection-tests

vars:
  BASE_DIR: "/home/usanz/Desktop/Uni/22-23/tfg-unai/zenoh_nodes/zenoh_flow_tests"

configuration:
  swarm_size: 2 #Number of robots
  robot_namespaces: ["robot1", "robot2"]
  ns_bytes_lenght: 64
  int_bytes_lenght: 4



sources:
  - id: zenoh-sub
    configuration:
      key-expressions:
        #out: rt/robot1/scan
        out: rt/robot2/scan
    descriptor: "builtin://zenoh"

operators:
  - id: lidar-circle-detector
    descriptor: "file://{{ BASE_DIR }}/nodes/circle_detector/lidar_circle_detector.yaml"

sinks:
  - id: zenoh-pub
    configuration:
      key-expressions:
        in: rt/debug/img
    descriptor: "builtin://zenoh"



links:
  - from:
      node: zenoh-sub
      output: out
    to:
      node: lidar-circle-detector
      input: lidar_in

  - from:
      node: lidar-circle-detector
      output: img_out
    to:
      node: zenoh-pub
      input: in
